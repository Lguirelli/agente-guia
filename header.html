<header class="site-header" aria-label="Cabeçalho da Guia (Agência)">
  <div class="container nav">
    <!-- Marca centralizada -->
    <a href="index.html" class="brand" aria-label="Voltar para o site da Guia (Agência)">
      <svg class="dot" width="12" height="12" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12">
      <span>Guia</span>
    </a>

    <!-- Botão + Dropdown -->
    <div class="menu-wrap">
      <button class="menu-toggle" aria-label="Abrir menu" aria-expanded="false" aria-controls="site-menu">
        <span class="bar bar-top"></span>
        <span class="bar bar-middle"></span>
        <span class="bar bar-bottom"></span>
      </button>

      <!-- Fechado por padrão -->
      <nav id="site-menu" class="menu" aria-label="Navegação do produto" hidden>
        <a href="pagina_empresa.html">Sobre a agência</a>
        <a href="index.html#como-funciona">Como funciona</a>
        <a href="index.html#planos">Planos</a>
        <a href="index.html#seguranca">Segurança &amp; LGPD</a>
        <a href="index.html#faq">FAQ</a>
        <a href="index.html#contato">Falar com a agência</a>
        <a href="index.html#contato">Saiba mais</a>
      </nav>
    </div>
  </div>
</header>

<script>
(function () {
  const header = document.querySelector('.site-header');
  if (!header) return;

  const btn  = header.querySelector('.menu-toggle');
  const menu = header.querySelector('#site-menu');

  if (!btn || !menu) return;

  function setOpen(open) {
    btn.classList.toggle('is-open', open);
    menu.classList.toggle('open', open);
    menu.hidden = !open;
    btn.setAttribute('aria-expanded', String(open));
    document.documentElement.classList.toggle('no-scroll', open);
    document.body.classList.toggle('no-scroll', open);
  }

  // estado inicial: fechado
  setOpen(false);

  // alterna no clique do botão
  btn.addEventListener('click', () => setOpen(!menu.classList.contains('open')));

  // fecha ao clicar fora
  document.addEventListener('click', (e) => {
    if (!menu.classList.contains('open')) return;
    if (!menu.contains(e.target) && !btn.contains(e.target)) setOpen(false);
  });

  // fecha com ESC
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && menu.classList.contains('open')) setOpen(false);
  });

  // fecha ao mudar de breakpoint (evita ficar “preso” aberto)
  const MQ = 860;
  let prevW = window.innerWidth;
  window.addEventListener('resize', () => {
    const w = window.innerWidth;
    if ((prevW <= MQ && w > MQ) || (prevW > MQ && w <= MQ)) setOpen(false);
    prevW = w;
  });
})();
</script>
